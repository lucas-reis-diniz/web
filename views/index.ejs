<%- include("layout") %>

<h1>KETSU Checker — Dashboard</h1>

<div class="cards">

    <div class="card">
        <h2>Total de Registros</h2>
        <p class="big"><%= stats.total %></p>
    </div>

    <div class="card">
        <h2>Por Servidor</h2>
        <% for (let s in stats.byServer) { %>
            <p><strong><%= s %></strong>: <%= stats.byServer[s] %></p>
        <% } %>
    </div>

    <div class="card">
        <h2>Por Clan</h2>
        <% for (let c in stats.byClan) { %>
            <p><strong><%= c %></strong>: <%= stats.byClan[c] %></p>
        <% } %>
    </div>

</div>

<h2>Últimas 10 Submissões</h2>

<table>
    <tr>
        <th>Nick</th>
        <th>Servidor</th>
        <th>Clan</th>
        <th>Usuário Discord</th>
        <th>Data</th>
    </tr>

    <% recent.forEach(r => { %>
        <tr>
            <td><%= r.nick %></td>
            <td><%= r.server %></td>
            <td><%= r.clan %></td>
            <td><%= r.username %></td>
            <td><%= new Date(r.timestamp).toLocaleString() %></td>
        </tr>
    <% }) %>
</table>
